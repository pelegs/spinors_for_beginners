\section{Dual Vectors and Dual Spaces}
% Overview:
% Measuring vectors: rulers. How they look like in R2, R3, etc.
% Every ruler can be represented using a specific vector in Rn (direction + density). The measurement is then done via the inner product.
% These inner products actually represent all possible linear functionals Rn->R. They make a linear space on their own.
% Define general idea of dual spaces.
% Basis sets and change of basis - covarience, contravarience and all that.
% relevant SE answers: https://math.stackexchange.com/questions/3749/why-do-we-care-about-dual-spaces, https://math.stackexchange.com/a/3751/849224
% Citation in bibliography file

\subsection{Linear measurements and rulers\\(or: why do we care about dual vectors?)}
\newthought{Frequently in linear algebra} we want to measure vectors. A measure in this context is a way to assign each vector a real number which somehow reflects its properties (i.e. direction and/or magnitude). Mathematically, we are looking for a function $\phi:\Rs[n]\to\Rs$ - we feed it a vector, and it returns some measurement.

One common way to measure vectors is using the norm: the norm of a vector in $\Rs[n]$ using the standard basis set $\eb{1},\eb{2},\dots,\eb{n}$ is given by
\begin{equation}
    \vnorm{v} = \sqrt{v_{1}^{2}+v_{2}+\dots+v_{n}^{2}},
    \label{eq:std_norm}
\end{equation}
where the numbers $v_{1},v_{2},\dots,v_{n}$ are the components in each of the respective basis vectors.

While the norm does tell us something useful about a vector, it has two drawbacks: it doesn't tell us anything about the vector's orientation in space, and even worse - it is not linear. We can try and simplify the calculation of the norm by dropping the square root and calculating the \textit{square norm}, but that too isn't linear, nor does it tell us anything about the vector's orientation.

Another way of measuring vectors is by using \textit{rulers}. Rulers are nothing more than a set of graduation lines with an orientation in space (\cref{fig:rulers}). We can therefore represent a ruler using a vector: the magnitude of the vector is the frequency of the graduation lines, while its direction is the direction of the ruler (which is orthogonal to the graduation lines). To not confuse ruler vectors with \enquote{regular} vectors, I will denote ruler vectors using a greek letter and an asterisk, e.g. $\dualvec{\alpha}$.

\begin{marginfigure}[-35\baselineskip]
    \begin{center} 
        \begin{tikzpicture}[scale=0.55]
            \path pic[rotate=25, transform shape] (A) {ruler={10}{1.5}{2}{xred!15}{$R_{1}$}};
            \path[below of=A.south west, xshift=4cm, yshift=-2cm] pic[rotate=55, transform shape] {ruler={7}{1.5}{0.8}{xblue!15}{$\dualvec{\alpha}_{2}$}};
            \path[on background layer, below of=A, anchor=center, yshift=4cm] pic[rotate=-60, transform shape] {ruler={8}{1.5}{1.0}{xgreen!15}{$\dualvec{\alpha}_{3}$}};
        \end{tikzpicture}
    \end{center}
    \caption{Three rulers, $\dualvec{\alpha}_{1},\dualvec{\alpha}_{2},\dualvec{\alpha}_{3}$, each with its own orientation and frequency of graduation lines.}
    \label{fig:rulers}
\end{marginfigure}

Now, we usually rotate rulers to align with the orientation of the magnitude we wish to measure - however here we want our rulers to also measure orientation. Therefore, instead of rotating the ruler to align with a vector we wish to measure, we \textit{project} the vector on the ruler and then take our measurement (\cref{fig:projecting_onto_rulers}).

\begin{marginfigure}
    \begin{center}
        \begin{tikzpicture}[scale=0.55]
            \draw[perpline={black!40}] (2,3) -- ++(0.25,-1);
            \draw[perpline={black!40}] (6,5) -- ++(0.5,-2);
            \path pic[rotate=15, transform shape] (A) {ruler={10}{1.5}{1}{black!15}{$\dualvec{\alpha}$}};
            \draw[line width=1mm, xred, opacity=0.5] (2.25,2.05) -- (6.5,3.155);
            \draw[vector={xred}] (2,3) -- ++(4,2) node[midway, above] {$\vec{v}$};
        \end{tikzpicture}
    \end{center}
    \caption{Measuring a vector using a ruler by projecting the vector onto the ruler. The result of the projection is drawn as a red line on the ruler.}
    \label{fig:projecting_onto_rulers}
\end{marginfigure}

Since projection in linear algebra is calculated via the inner product, the measurement $m$ of a vector $\vec{v}$ using a ruler $\dualvec{\alpha}$ is given by
\begin{equation}
    m = \inner{\dualvec{\alpha}}{\vec{v}}.
    \label{eq:ruler_measurement}
\end{equation}

However, since we can represent a ruler using a vector, we can use the vector representation in \cref{eq:ruler_measurement}. And again, to distinguish ruler vectors from \enquote{regular} vectors written in an excplicit form, we write the ruler vectors as row vectors:
\begin{align}
    \inner{\dualvec{\alpha}}{\vec{v}} &= \GenericRowVec{\alpha}\GenericColVec{v}\\\nonumber
                                      &= \alpha_{1}v_{1} + \alpha_{2}v_{2} + \dots + \alpha_{n}v_{n}.
    \label{eq:ruler_measurement_explicit}
\end{align}

Another reason for representing rulers as row vectors is that it corresponds well to matrix multiplication: if we regard a row vector as a $1\times n$ matrix, and a column vector as an $n\times1$ matrix, the resulting product is a $1\times1$ matrix, which is equivalent to a scalar. This will become handy when we discuss higher-order rulers (which in turn can handle higher-order \enquote{vectors}).

A convinient visualization for rulers in $\Rs[2]$ is their representation as a set of parallel lines which are the extensions of the ruler's graduation marks. We draw the first line going through the origin and orthogonal to the orientation of the vector representation of the ruler. Then, we draw a line for each integer multiple of the frequency of the ruler's graduation marks. This results in a set of evenly spaced and parllel lines, which fit precisely with the main graduation mark of the ruler they represent (\cref{fig:rulers_as_lines}).

\begin{marginfigure}[-20\baselineskip]
    \begin{center}
        \begin{tikzpicture}
            \begin{axis}[
                xynogrid,
                width=6cm, height=6cm,
            ]
            \foreach \m in {-5,...,5}
                \addplot[hyperplane1D={xblue}] {-x+3.2*\m};
            \end{axis}
            \path[xshift=2cm, yshift=-1.825cm, opacity=1] pic[rotate=45, transform shape] (A) {ruler={5.5}{1}{1}{xblue!5}{}};
        \end{tikzpicture}
    \end{center}
    \caption{The graphical representation of a ruler shown next to the ruler, such that the infinite set of lines drawn match the ruler's graduation marks.}
    \label{fig:rulers_as_lines}
\end{marginfigure}

In $\Rs[3]$ a ruler is represented in a similar way, but with \textit{planes} instead of lines (\cref{fig:rulers_as_planes}). And in general, the rulers for a space $\Rs[n]$ can be represented using an infinite set of $(n-1)$-dimensional \textit{hyperplanes}.

\begin{marginfigure}
    \begin{center}
        \tdplotsetmaincoords{50}{110}
        \begin{tikzpicture}[tdplot_main_coords, rotate=0, scale=0.85]
            \pgfmathsetmacro{\a}{1.5}
            \pgfmathsetmacro{\b}{\a+0.5}
            \foreach \z in {-2,-1.25,...,2}
                \draw[very thick, xgreen, fill=xgreen, opacity=0.5] (-\a,-\a,\z) -- (-\a,\a,\z) -- (\a,\a,\z) -- (\a,-\a,\z) -- cycle;
        \end{tikzpicture}
        \begin{tikzpicture}
            \node (O) at (0,0) {};
            \path[above of=O, yshift=4.6mm] pic[rotate=90, transform shape] (A) {ruler={5}{1}{0.5}{xgreen!5}{}};
        \end{tikzpicture}
    \end{center}
    \caption{Representation of rulers in $\Rs[3]$ as planes.}
    \label{fig:rulers_as_planes}
\end{marginfigure}

From \cref{eq:ruler_measurement_explicit} we can see that any ruler $\dualvec{\alpha}$ can be written as the left half of an inner product, i.e. $\inner{\dualvec{\alpha}}{\cdot}$. This hints that the ruler is \textit{acting} on vectors, yielding a scalar. Looking at the explicit form of a ruler acting on a vector, we can see that not only do rulers represent linear functions, but they in-fact represent \textit{all} the possible \textit{linear} functions of the type $\phi:\Rs[n]\to\Rs$. Such functions are called \textit{linear forms}, or more specifically in this case a \textit{1-form}.

Since rulers can be represented as vectors but aren't exactly the same as \enquote{regular} vectors, they are also called \textit{dual vectors}, which is the name I will use for them from now on. For any vector space $\Rs[n]$, the dual vectors form a vector space of their own, called the \textit{dual space to $\Rs[n]$}.

The linearity of the dual vectors space simplifies many calculations - foremost, it allows us to construct dual vectors from other dual vectors using linear combinations. See \cref{example:dual_linear_comb} below.

\begin{example}{Linear combination of dual vectors}{dual_linear_comb}
   Suppose we have two dual vectors
    \begin{align}
        \dualvec{\alpha} &= \rowvec{1;-4;0},\\\nonumber
        \dualvec{\beta} &= \rowvec{2;1;3}.
        \label{eq:two_dual_vecs_in_R3}
    \end{align}

    We can use $\dualvec{\alpha}$ and $\dualvec{\beta}$ to create a third dual vector $\dualvec{\gamma}$:
    \begin{align}
        \dualvec{\gamma}&=5\rowvec{1;-4;0} + 2\rowvec{2;1;3}\\\nonumber  
                   &= \rowvec{5+4;-20+2;0+6}\\\nonumber
                   &= \rowvec{9;-18;6}.
        \label{eq:linear_comb_dual_vecs}
    \end{align}

    The application of $\dualvec{\gamma}$ on any vector $\vec{v}\in\Rs[3]$ is then given by
    \begin{equation}
        \inner{\dualvec{\gamma}}{\vec{v}} = 9v_{1} -18v_{2} +6v_{3},
        \label{eq:application_gamma_on_vec}
    \end{equation}
    which is exactly the application of $\dualvec{\alpha}$ on the vector five times followed by the application of $\dualvec{\beta}$ twice (try it for yourself!).
\end{example}

\subsection{Introducing some formalism}
Now that we know \textit{why} we use dual vectors, we can formalize the concept and find useful properties.

\begin{definition}{Dual space}{dual_space}
    Given a vector space $V$ over a field $\mathbb{F}$, its \textit{dual space}, denoted $\dualspace{V}$, is the set of all the linear functions $\phi:V\to\mathbb{F}$. The elements of $\dualspace{V}$ are called \textit{dual vectors}.
\end{definition}

A dual space equipped with a closed addition operation between any two of its elements and a closed product between its elements and the elements of the field $\mathbb{F}$ is itself a \textit{vector space}, with similar structure to the space $V$.

\begin{challenge}{Dual space as a vector space}{dual_vector_space_challange}
    Show that a dual space euipped with addition and scalar product as defined above is indeed a vector space (Use the definition XXX).
\end{challenge}

To write:
\begin{enumerate}
    \item Examples of dual vectors of functions?..
\end{enumerate}

\subsection{Basis sets and coordinate transformations}
\begin{enumerate}
    \item Dual basis: converting from a basis set in $V$ to its dual in $\dualspace{V}$.
    \item Covariance of dual vectors basis change vs. contra-varience of vectors.
\end{enumerate}
% ---------------------------------------------------------------- %
% STUFF I MIGHT NEED LATER...
%
% \begin{marginfigure}
%     \begin{center}
%         \begin{tikzpicture}
%             \begin{axis}[
%                 xyplane,
%                 width=7cm, height=7cm,
%             ]
%             % \draw[vector={xblue}] (0,0) -- (2,-3);
%             \addplot[name path=A, function={xred}] {6*exp(-x^2/2)-2};
%             \addplot[name path=B, function={xblue}] {5/(1+exp(-x))};
%             \addplot[xpurple, fill opacity=0.2] fill between[of=A and B, soft clip={domain=.5:5}];
%             \addplot[xgreen, fill opacity=0.2] fill between[of=A and B, soft clip={domain=-1:0.5}];
%             \end{axis}
%         \end{tikzpicture}
%     \end{center}
%     \caption{Drawing functions.}
%     \label{fig:funcs_test}
% \end{marginfigure}

% \begin{marginfigure}
%     \begin{center}
%         \begin{tikzpicture}
%             \begin{axis}[
%                 xyplane,
%                 width=7cm, height=7cm,
%             ]
%                 \pgfmathsetmacro{\ax}{3}
%                 \pgfmathsetmacro{\ay}{0.5}
%                 \pgfmathsetmacro{\bx}{-2}
%                 \pgfmathsetmacro{\by}{4}
%                 \pgfmathsetmacro{\tha}{atan2(\ay,\ax)}
%                 \pgfmathsetmacro{\thb}{atan2(\by,\bx)}
%                 \pgfmathsetmacro{\angL}{1.75}
%                 \coordinate (a) at (axis direction cs:\ax,\ay);
%                 \coordinate (b) at (axis direction cs:\bx,\by);
%
%                 % Draw
%                 \draw[ultra thick, dashed, xgreen, fill=xgreen, fill opacity=0.25, arcnode={6}{$\theta$}, text opacity=1] (0,0) -- ({\angL*cos(\tha)},{\angL*sin(\tha)}) arc (\tha:\thb:\angL) -- cycle;
%                 \draw[vector={xred}] (0,0) -- ++(a) node[pos=1.1] {$\vec{a}$};
%                 \draw[vector={xblue}] (0,0) -- ++(b) node[pos=1.1] {$\vec{b}$};
%             \end{axis}
%         \end{tikzpicture}
%     \end{center}
%     \caption{Drawing vectors.}
%     \label{fig:vecs_test}
% \end{marginfigure}

% \begin{figure}
%     \begin{center}
%         \tdplotsetmaincoords{50}{110}
%         \begin{tikzpicture}[tdplot_main_coords, rotate=0, scale=0.85]
%             \pgfmathsetmacro{\a}{1.5}
%             \pgfmathsetmacro{\b}{\a+0.5}
%             \foreach \z in {-2,-1.25,...,2}
%                 \draw[very thick, xblue, fill=xblue, opacity=0.5] (-\a,-\a,\z) -- (-\a,\a,\z) -- (\a,\a,\z) -- (\a,-\a,\z) -- cycle;
%             \draw[vector={xdarkblue}] (-\b,\b,-1.5) -- (-\b,\b,1.5);
%         \end{tikzpicture}
%         \hfill
%         \tdplotsetmaincoords{40}{120}
%         \begin{tikzpicture}[tdplot_main_coords, rotate=105, scale=0.85]
%             \pgfmathsetmacro{\a}{1.5}
%             \pgfmathsetmacro{\b}{\a+0.5}
%             \foreach \z in {-3,-1.5,...,3}
%                 \draw[very thick, xdarkgreen, fill=xgreen, opacity=0.5] (-\a,-\a,\z) -- (-\a,\a,\z) -- (\a,\a,\z) -- (\a,-\a,\z) -- cycle;
%             \draw[vector={xdarkgreen}] (-\b,\b,-1) -- (-\b,\b,1);
%         \end{tikzpicture}
%     \end{center}
%     \caption{Representation of rulers in $\Rs[3]$; as with the lines in the case of $\Rs[2]$, I added a vector showing the direction and density of the graduation marks. Note how the planes (stacks) in blue are more densely spaced compared to the green planes, and therefore the vector representing that respective ruler is longer compared to the vector representing the ruler in green.}
%     \label{fig:rulers_3D}
% \end{figure}
