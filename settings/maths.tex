% Packages
\usepackage{amsmath, mathtools, bm, commath}
\usepackage{physics}
\usepackage{siunitx}
\usepackage{nicematrix}

% General settings
\allowdisplaybreaks     % Allows for equations to break between pages

% Cancel-lines related
\usepackage[thicklines]{cancel}
\renewcommand\CancelColor{\color{xred}}
\newcommand{\cancelcol}[2][xred]{ % This is such a silly solution...
	\renewcommand\CancelColor{\color{#1}}
	\cancel{#2}
	\renewcommand\CancelColor{\color{xred}}
}

% Easier space-notation
\newcommand{\Rs}[1][]{\mathbb{R}^{#1}}
\newcommand{\Cs}[1][]{\mathbb{C}^{#1}}

% Set notation for vectors (currently: bold letters)
\renewcommand{\vec}[1]{\bm{#1}}
\newcommand{\uvec}[1]{\bm{\hat{#1}}}
\newcommand{\vnorm}[1]{\left\| \vec{#1} \right\|}
\newcommand{\cvec}[1]{\bm{\overline{#1}}}
\newcommand{\mat}[1]{\bm{#1}}

% Vector operations
\newcommand{\inner}[2]{\langle #1,#2 \rangle}

% Dual space related
\newcommand{\dualspace}[1]{#1^{*}}
\newcommand{\dualvec}[1]{\vec{#1}^{*}}

% Row- and column-vectors: arguments separated by ";".
% Example: $\vec{a} = \colvec{1;2;3;4}$.
\makeatletter
\newcommand\rcvector[2][\\]{\ensuremath{%
  \global\def\rc@delim{#1}%
    \negthinspace\begin{bmatrix}
      \rc@vector #2;\relax\noexpand\@eolst%
    \end{bmatrix}}}
\def\rc@vector #1;#2\@eolst{%
  \ifx\relax#2\relax
    #1
  \else
    #1\rc@delim
    \rc@vector #2\@eolst%
  \fi}
\makeatother
\newcommand{\colvec}{\rcvector}
\newcommand{\rowvec}[1]{\rcvector[,\;]{#1}}
\newcommand{\GenericRowVec}[2][n]{\rowvec{#2_{1};#2_{2};\dots;#2_{#1}}}
\newcommand{\GenericColVec}[2][n]{\colvec{#2_{1};#2_{2};\vdots;#2_{#1}}}

% Colored vectors
\newcommand{\colorVec}[2]{\color{#1}{\vec{#2}}\color{black}}
\newcommand{\vred}{\colorVec{xdarkred}{v}}
\newcommand{\vblue}{\colorVec{xdarkblue}{v}}
\newcommand{\vgreen}{\colorVec{xdarkgreen}{v}}

% Basis vectors and transformations
\newcommand{\eb}[1]{\vec{e}_{#1}}
\newcommand{\ebc}[1]{\tilde{\vec{e}}_{#1}}
\newcommand{\ebr}[1]{\color{xdarkblue}\eb{#1}\color{black}}
\newcommand{\ebcr}[1]{\color{xdarkred}\ebc{#1}\color{black}}
\newcommand{\oldB}{\color{xdarkblue}B\color{black}}
\newcommand{\newB}{\color{xdarkred}\tilde{B}\color{black}}
\newcommand{\Forw}{\bm{F}}
\newcommand{\Backw}{\bm{F^{-1}}}

% Dark equal?
\newcommand{\beq}{\color{black}{=}}

% Better imaginary unit and natural base notation (to separate from variables)
\newcommand{\iu}{\mathrm{i}\mkern1mu}
\newcommand{\eu}{\mathrm{e}}
\newcommand{\Eu}[1]{\mathrm{e}^{#1}}
\newcommand{\EX}[1]{\exp\left(#1\right)}

% General nice matrix
\newcommand{\GNMatrix}[3]{
  \begin{bNiceMatrix}
    #1_{11} & #1_{12} & \dots & #1_{1#3}\\
    #1_{21} & #1_{22} & \dots & #1_{2#3}\\
    \vdots & \vdots & \Ddots & \vdots\\
    #1_{#21} & #1_{#22} & \dots & #1_{#2#3}
  \end{bNiceMatrix}
}
